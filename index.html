<!DOCTYPE html>
<html lang="es">
<head>
        <meta charset="UTF-8">
        <title>Proforma de Productos UP-CONS</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <style>
        .zoom-container {
            transform: scale(0.60);
            transform-origin: top center;
            width: 166.66%;
        }
/* Tema NEON */
:root {
    /* Tema NEON CLARO */
    --neon-bg: #f7fbff;
    --neon-panel: rgba(255, 255, 255, 0.88);
    --neon-primary: #14b8ff; /* cian */
    --neon-secondary: #8b5cf6; /* violeta */
    --neon-accent: #06d6a0; /* verde */
    --neon-danger: #ff3864; /* rojo */
    --neon-text: #102035; /* texto oscuro */
    --neon-muted: #5b6b7c;
}

@keyframes neonPulse {
    0%, 100% { filter: drop-shadow(0 0 6px rgba(58, 239, 255, 0.45)); }
    50% { filter: drop-shadow(0 0 12px rgba(155, 92, 255, 0.45)); }
}

/* Estilo del botón flotante */
#calculator-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 54px;
    height: 54px;
    border-radius: 10px;
    object-fit: contain;
    background: transparent;
    border: none;
    box-shadow: none;
    cursor: pointer;
    touch-action: none;
    user-select: none;
    -webkit-user-drag: none;
    transition: transform 0.15s ease;
    z-index: 9999;
    display: inline-block;
}

#calculator-btn:hover { 
    transform: translateY(-1px);
}

#calculator-btn.dragging {
    transform: scale(1.02);
}

/* Estilo de la calculadora (neon) */
#calculator {
    position: fixed;
    top: 70px;
    right: 10px;
    width: 260px;
    background: var(--neon-panel);
    border: 1px solid rgba(20,184,255,0.35);
    border-radius: 14px;
    padding: 10px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08), 0 0 18px rgba(20,184,255,0.18), 0 0 26px rgba(139,92,246,0.15);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    z-index: 9998; 
}

/* Pantalla */
#calc-display {
    margin-bottom: 10px;
}

#calc-output {
    width: 100%;
    height: 52px; /* más pequeño */
    background: #ffffff;
    color: var(--neon-text);
    font-size: 24px; /* más pequeño */
    letter-spacing: 0.5px;
    text-align: right;
    border: 1px solid rgba(20,184,255,0.3);
    padding: 8px 12px;
    border-radius: 10px;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.05), 0 0 0 1px rgba(255,255,255,0.7) inset;
    text-shadow: none;
    box-sizing: border-box; /* evita desbordes */
    overflow: hidden;
}

/* Botones */
#calc-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

/* Botones NEON */
#calc-buttons .btn {
    width: 100%;
    height: 48px; /* más compacto */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg, #ffffff, #f3f7ff);
    color: var(--neon-text);
    font-size: 18px;
    border: 1px solid rgba(16,32,53,0.08);
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 0 0 1px rgba(255,255,255,0.8) inset, 0 4px 10px rgba(0, 0, 0, 0.08);
    transition: transform 0.12s ease, box-shadow 0.12s ease, color 0.12s ease, background 0.12s ease;
}

#calc-buttons .btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 0 0 1px rgba(255,255,255,0.9) inset, 0 6px 12px rgba(0,0,0,0.1), 0 0 10px rgba(20,184,255,0.18);
}

#calc-buttons .btn:active {
    transform: translateY(0);
}

/* Variantes */
#calc-buttons .btn-num { /* números y punto */
    color: var(--neon-text);
}

#calc-buttons .btn-op {
    color: var(--neon-secondary);
    border-color: rgba(139,92,246,0.35);
    text-shadow: none;
}

#calc-buttons .btn-ctrl { /* clear */
    color: var(--neon-danger);
    border-color: rgba(255,56,100,0.35);
}

/* Igual (=) especial */
#equal-btn.btn-equal {
    grid-row: span 2;
    background: linear-gradient(180deg, rgba(139,92,246,0.95), rgba(20,184,255,0.95));
    color: #0a1a29;
    font-size: 22px;
    font-weight: 800;
    border-color: rgba(20,184,255,0.45);
    box-shadow: 0 0 0 1px rgba(255,255,255,0.9) inset,
                0 8px 18px rgba(0,0,0,0.12),
                0 0 16px rgba(20,184,255,0.35),
                0 0 26px rgba(139,92,246,0.25);
    animation: neonPulse 4s ease-in-out infinite;
}

/* Botones compactos y bonitos para Guardar/Cargar Proforma */
.mini-action-btn {
    font-size: 11px;
    padding: 6px 10px;
    min-width: 120px; /* más pequeños */
    background: linear-gradient(180deg, #ffffff, #f3f7ff);
    color: #0f1f33;
    border: 1px solid rgba(16,32,53,0.12);
    border-radius: 10px;
    box-shadow: 0 1px 0 rgba(255,255,255,0.9) inset, 0 3px 8px rgba(0,0,0,0.08);
    transition: transform 0.12s ease, box-shadow 0.12s ease;
}
.mini-action-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 1px 0 rgba(255,255,255,1) inset, 0 6px 12px rgba(0,0,0,0.1);
}
.mini-action-btn:active {
    transform: translateY(0);
}




        
        
        
        html, body {
   height: 150%;
   margin: 0;
   padding: 0;
   overflow-y: auto !important;
   -webkit-overflow-scrolling: touch; /* Esto hace que el desplazamiento sea suave en dispositivos móviles */
}

.proforma-container { /* Reemplaza '.proforma-container' con el id o clase de tu contenedor principal */
   max-height: 100vh; /* Limita la altura máxima al 100% de la altura de la ventana */
   overflow-y: auto;  /* Habilita el scroll vertical */
}

#contenido {  /* Este es un ejemplo de contenedor. Reemplaza con tu contenedor real */
   position: relative;
   overflow-x: hidden;  /* Evita el scroll horizontal */
}

        
        
        
        
        
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
        font-size: 12px;
    }
    .formulario {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 10px;
    }
    select, input { /* Eliminamos el button de aquí para darle un estilo independiente */
        width: 100%;
        padding: 8px;
        margin-bottom: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 12px;
    }
    button {
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        padding: 4px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        background-color: white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    th, td {
        border: 1px solid #ddd;
        padding: 4px;
        text-align: left;
        font-size: 10px;
    }
    th {
        background-color: #007bff;
        color: white;
    }
    .proforma-container {
        background: white;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .item-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .item-details {
        flex-grow: 1;
        font-size: 10px;
    }
    .edit-icon, .close-btn {
        font-size: 16px;
        cursor: pointer;
    }
    .close-btn {
        color: red;
        border: none;
        background: transparent;
    }    

    /* Estilo para los botones "Agregar Producto" y "Guardar como Imagen" */
    .action-buttons-container {
        display: flex;
        justify-content: space-between; /* Para que estén uno al lado del otro */
        width: 100%; /* O el ancho que desees para los botones */
        gap: 10px; /* Espacio entre los botones */
        margin-top: 10px; /* Margen superior para separarlos de otros elementos */
    }

    .action-button {
        flex: 1; /* Para que ambos botones ocupen el mismo espacio */
        font-size: 13px;
        padding: 10px 5px; /* Ajusta el padding para hacerlos más rectangulares/cuadrados */
        border-radius: 5px; /* Bordes ligeramente redondeados */
        transition: background-color 0.2s, transform 0.1s;
    }

    .action-button:active {
        transform: scale(0.95); /* Efecto de aplastamiento */
    }

    #agregarBtn {
        background-color: #007bff; /* Color original o un verde si prefieres para agregar */
    }
    #agregarBtn:active {
        background-color: #0056b3; /* Un tono más oscuro al presionar */
    }

    #guardarImagenBtn {
        background-color: #28a745; /* Verde para guardar imagen */
    }
    #guardarImagenBtn:active {
        background-color: #1e7e34; /* Un tono más oscuro al presionar */
    }


    </style>
</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>


<body onload="inicializarProductos();">

                <div style="position:relative;min-height:54px;margin-bottom:8px;">
                    <h1 style="margin:0;font-size:1.45rem;">UP-CONS IMPORTADOR</h1>
                    <img id="calculator-btn" src="calculadora.png" alt="Abrir calculadora" title="Calculadora" style="position:absolute;top:-18px;right:-8px;z-index:10;" />
                </div>
    <div class="formulario">
        
        
        
        
        <input type="text" id="buscador" placeholder="Buscar producto..." oninput="buscarProducto()">
<select id="producto" onchange="copiarNombreYPrecio()">
    </select>
            
    
    
    
    
    
    
  
               


<div id="calculator" style="display: none;">
    <div id="calc-display">
        <input type="text" id="calc-output" disabled />
    </div>
    <div id="calc-buttons">
        <button class="btn btn-ctrl" onclick="clearOutput()">C</button>
        <button class="btn btn-op" onclick="appendOperator('%')">%</button>
        <button class="btn btn-op" onclick="appendOperator('/')">/</button>
    <button class="btn btn-op" onclick="appendOperator('x')">x</button>

        <button class="btn btn-num" onclick="appendNumber(7)">7</button>
        <button class="btn btn-num" onclick="appendNumber(8)">8</button>
        <button class="btn btn-num" onclick="appendNumber(9)">9</button>
        <button class="btn btn-op" onclick="appendOperator('-')">-</button>

        <button class="btn btn-num" onclick="appendNumber(4)">4</button>
        <button class="btn btn-num" onclick="appendNumber(5)">5</button>
        <button class="btn btn-num" onclick="appendNumber(6)">6</button>
        <button class="btn btn-op" onclick="appendOperator('+')">+</button>

        <button class="btn btn-num" onclick="appendNumber(1)">1</button>
        <button class="btn btn-num" onclick="appendNumber(2)">2</button>
        <button class="btn btn-num" onclick="appendNumber(3)">3</button>
        <button id="equal-btn" class="btn btn-equal" rowspan="2" onclick="calculateResult()">=</button>

        <button class="btn btn-num" onclick="appendNumber(0)">0</button>
        <button class="btn btn-num" onclick="appendDot()">.</button>
    </div>
</div>


           
           
           
           
           
           
           
            
            
            
        <div class="item-container">
    <input type="text" id="nombreProducto" placeholder="Nombre del Producto" style="width: 230px; font-size: 12px;">
</div>

<div class="item-container">PRECIO ➡️
    <input type="number" id="precioProducto" placeholder="Precio del Producto" style="width: 100px; font-size: 12px;">
</div>
        
        
        
        
      <div style="display: flex; align-items: center;">
    <label for="cantidad" style="margin-right: 5px;">CANTIDAD ➡️</label>
    <input type="number" id="cantidad" placeholder="Cantidad" min="1" value="1" style="width: 80px; font-size: 12px;">
</div>
        
        
<div class="action-buttons-container">
    <button id="agregarBtn" class="action-button" onclick="agregarProducto()">✅ Agregar producto</button>
    <button id="guardarImagenBtn" class="action-button" onclick="guardarComoImagen()">⬇️🖼️Guardar como Imagen JPG</button>
</div>
    
    
    
    
<div style="display: flex; justify-content: space-between; width: 100%; margin-top: 10px; gap: 8px;">
    <button class="mini-action-btn" onclick="guardarPagina()">💾 Guardar Proforma</button>
    <button class="mini-action-btn" onclick="cargarPagina()">⬆️ Cargar Proforma</button>
</div>
 


    
    <input type="text" id="nombrePagina" placeholder="Nombre del archivo" style="width: 100%;">
    



    <div class="proforma-container" id="proforma">
        
        <div style="display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:2px;">
            <img src="logo.jpg" alt="Up-cons logo" style="height:28px;vertical-align:middle;display:inline-block;">
            <span style="font-size:22px;font-weight:bold;color:#102035;letter-spacing:2px;margin-left:12px;">PROFORMA</span>
        </div>
        <div>Direccion: Quito / Av. Ecuatoriana y Martín Santiago Icaza S44-65 <br>
        Telf: 0983801298 - 0995986366</div>
        <div style="margin: 4px 0; font-size: 10px; color: #888;">NOTA: Estos precios pueden variar sin previo aviso.</div>
        <div>
            <label for="nombreCliente">Cliente:</label>
            <input type="text" id="nombreCliente" placeholder="Nombre del Cliente">
        </div>
        <table>
            <tr>
                <th>Producto</th>
                <th>Cant.</th>
                <th>Precio Uni.</th>
                <th>Subtotal</th>
                <th>Editar</th>
                <th>Eliminar</th>
            </tr>
        </table>
        <h2 id="subtotal" style="font-size: 9px;"> </h2>
        <h2 id="iva" style="font-size: 8px;"></h2>
        <h2 id="total" style="font-size: 15px;">Total: $0.00</h2>
        <div>
            <label for="nombreVendedorDisplay">Vendedor:</label>
            <span id="nombreVendedorDisplay" style="font-weight: bold;"></span>
        </div>
<script>
// Mostrar/ocultar la calculadora al hacer clic en el botón
document.addEventListener('DOMContentLoaded', function() {
    var calcBtn = document.getElementById('calculator-btn');
    if (calcBtn) {
        calcBtn.addEventListener('click', function() {
            var calculator = document.getElementById('calculator');
            if (calculator.style.display === 'none' || calculator.style.display === '') {
                calculator.style.display = 'block';
            } else {
                calculator.style.display = 'none';
            }
        });
    }
});

// Función para inicializar productos desde Google Sheets
const SHEET_ID = "2PACX-1vSfw3ECUvPvgX3ks-91DxTrywFIxO8AfCXNwEsuK6BQxQxu4k3NCdXiSd3603BctKJFqm9wv4ltIs5U";
async function cargarProductosDesdeGoogleSheets() {
    const url = `https://docs.google.com/spreadsheets/d/e/${SHEET_ID}/pub?output=csv`;
    try {
        const response = await fetch(url);
        const data = await response.text();
        const productos = data.split("\n").map(line => line.split(","));
        if (productos.length > 0) {
            productos.forEach(function(producto) {
                const nombreProducto = producto[0];
                const precioProducto = producto[1] ? parseFloat(producto[1]) : null;
                const option = document.createElement("option");
                if (!isNaN(precioProducto)) {
                    option.text = `${nombreProducto} - $${precioProducto.toFixed(2)}`;
                } else {
                    option.text = `${nombreProducto}`;
                }
                document.getElementById("producto").add(option);
            });
        }
    } catch (error) {
        console.error("Error cargando productos:", error);
    }
}
function inicializarProductos() {
    cargarProductosDesdeGoogleSheets();
}
</script>

    
    
</body>
</html>
